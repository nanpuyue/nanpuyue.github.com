<!DOCTYPE HTML>
<html>
<head>
  <meta charset="utf-8">
  
  <title>南浦月</title>
  <meta name="author" content="南浦月">

  
  

  <link rel="alternate" href="/atom.xml" title="南浦月" type="application/atom+xml">
  <link rel="stylesheet" href="/css/style.css" media="screen" type="text/css">
  <!--[if lt IE 9]><script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script><![endif]-->
  <script src="//ajax.googleapis.com/ajax/libs/jquery/1.8/jquery.min.js"></script>
  
<script type="text/javascript">
  var _gaq = _gaq || [];
  _gaq.push(['_setAccount', 'UA-35959106-1']);
  _gaq.push(['_trackPageview']);

  (function() {
    var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
    ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
    var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
  })();
</script>

</head>

<body>
  <header id="header" class="inner"><nav>
  <ul>
    
      <li><a href="/">首页</a></li>
    
      <li><a href="/archives">归档</a></li>
    
      <li><a href="/links">链接</a></li>
    
      <li><a href="/live">直播</a></li>
    
      <li><a href="/about">关于</a></li>
    
  </ul>
</nav></header>
  <div id="content" class="inner">
  <article class="post">
  
    <div class="gallery">
  <div class="photoset">
    
      <img src="">
    
  </div>
  <div class="control">
    <div class="prev"></div>
    <div class="next"></div>
  </div>
</div>
  
  <header>
    
  
    <h1 class="title"><a href="/2013/029.html">GeoGebra——值得拥有的动态数学软件</a></h1>
  

    <time datetime="2013-03-14T09:41:00.000Z">
  <span class="day">14</span><span class="month">3月</span>
</time>
  </header>
  <div class="entry-content">
    
      <h2 id="GeoGebra是什么">GeoGebra是什么</h2>
<p>如果你还没有听说过GeoGebra，那么可以看看<a href="https://zh.wikipedia.org/wiki/GeoGebra" target="_blank">维基百科上的介绍</a>：  </p>
<blockquote>
<p>GeoGebra 是一个在GPL协议下发布的动态几何软件。 该项目于2001年由Markus Hohenwarter在萨尔茨堡大学创建，现在在佛罗里达州立大学进行维护。GeoGebra由Java写成，因此可以跨平台使用。</p>
<p>GeoGebra是一款动态几何软件。其绘图的基本元素包括点，直线，线段，多边形，向量，圆锥曲线和函数。（3.2及以后的版本还加入了电子表格和正在不断完善的数据处理功能）这些绘图元素均可在创建后直接在屏幕或者使用命令动态改变。 GeoGebra可以完成大量初高等数学中的绘图工作。比如GeoGebra可以直接绘制圆锥曲线，对函数求导数，积分，对多项式函数求极值和拐点等，这些极大的方便了教师们制作教学材料。</p>
</blockquote>
<p>如果你还是不太清楚，那么我可以告诉你它和几何画板是同一类软件，但是功能强大，可以说让几何画板难望其项背，除此之外GeoGebra还具有以下优势：  </p>
<ul>
<li>开源软件，完全免费</li>
<li>横跨Linux、Windows、Mac三大平台</li>
<li>国际语言支持，包含中文</li>
<li>中文指令支持，简单直观</li>
<li>支持LaTex语法</li>
<li>还有很多…</li>
</ul>
<h2 id="GeoGebra在中国">GeoGebra在中国</h2>
<p>这个话题就要从台湾谈起了，GeoGebra在台湾是很普及的，台湾师范大学的几位教授首先在台湾对GeoGebra进行了研究和推广，软件最初中文化的工作也是由他们完成的。所以在GeoGebra的研究和使用上台湾已经走在了大陆的前面，并且已经做出了很多卓有成效的工作。  </p>
<p>大陆这边对GeoGebra的研究才刚刚起步，2011年，在北京师范大学数学科学研究院曹一鸣教授牵头下成立了中国GeoGebra研究院成立，为GeoGebra在中国的首席研究院，随后在天津师范大学和南京师范大学的努力下，天津GeoGebra研究院和南京GeoGebra也相继成立。  </p>
<p>同时国内的GeoGebra用户并不多，也许是因为几何画板先入为主的原因，国内几乎都是几何画板的天下，相关的资料也很多，很多大学的相关课程也会涉及几何画板。但是几何画板毕竟是需要付费的商业软件，而且国内的正版用户也寥寥无几，大部分都是盗版，并且几何画板官方也是没有中文版的，国内流传的大部分都是网友制作的汉化破解版。在知识产权日益收到重视的今天，使用盗版软件并不是明智的选择。  </p>
<h2 id="从哪里可以获取GeoGebra">从哪里可以获取GeoGebra</h2>
<p>GeoGebra是开源软件，以GPL协议发布，你可以在其官方网站免费下载使用。  </p>
<p>官方网站：<a href="http://www.geogebra.org" target="_blank">http://www.geogebra.org</a><br>中文页面：<a href="http://www.geogebra.org/cms/zh_TW" target="_blank">http://www.geogebra.org/cms/zh_TW</a><br>安装包：<a href="http://www.geogebra.org/cms/zh_TW/download" target="_blank">http://www.geogebra.org/cms/zh_TW/download</a><br>便携版：<a href="http://www.geogebra.org/cms/zh_TW/portable" target="_blank">http://www.geogebra.org/cms/zh_TW/portable</a>  </p>
<h4 id="Windows">Windows</h4>
<p>国内网盘下载<br>安装包：<a href="http://s.yunio.com/BquU5x" target="_blank">http://s.yunio.com/BquU5x</a><br>便携版：<a href="http://s.yunio.com/oShgqm" target="_blank">http://s.yunio.com/oShgqm</a>  </p>
<p>Windows用户可以在上面的下载页面下载到安装包和便携版本，软件已经集成了Java运行环境，所以用户无需另行安装Java。  </p>
<p>另外由于Java的原因，GeoGebra在Windows下的中文界面字体不是很好看，虽然不影响使用，但我们可以自己动手更换其界面字体使界面更加美观(xp用户就不要改字体了，否则乱码)：  </p>
<p>先下载并安装文泉驿微米黑字体：<a href="http://files.nanpuyue.com/fonts/wqy-microhei.ttc" target="_blank">wqy-microhei.ttc</a><br>然后下载字体配置文件并将其置于指定位置：<a href="http://files.nanpuyue.com/others/geogebra/fontconfig.properties" target="_blank">fontconfig.properties</a>(右键，另存为)  </p>
<p>比如，假设你的GeoGebra安装在<code>C:\Program Files\GeoGebra 4.2\</code>，那么就把<a href="http://files.nanpuyue.com/others/geogebra/fontconfig.properties" target="_blank">fontconfig.properties</a>放在<br><code>C:\Program Files\GeoGebra 4.2\jre\lib\</code>，这样GeoGebra就会以文泉驿微米黑为默认的简体中文字体。<br><img src="https://lh6.googleusercontent.com/--xYaHcQjJZg/UfARE20GilI/AAAAAAAAAYs/tqXEYzaGrHA/s724/GeoGebra.png" alt="效果图">  </p>
<h4 id="Linux">Linux</h4>
<p>主流Linux发行版用户一般可以在软件源中找到GeoGebra，比如Ubuntu用户可以使用下面的命令直接安装：  </p>
<pre><code><span class="built_in">sudo</span> apt-get install geogebra
</code></pre><p>但是这些发行版的源中的GeoGebra一般版本都略旧，我们可以添加GeoGebra的官方源，然后从GeoGebra官方源安装最新的GeoGebra：  </p>
<p>GeoGebra软件源使用说明：<a href="http://software.opensuse.org/download.html?project=home:heimdall78&amp;package=geogebra" target="_blank">http://software.opensuse.org/download.html?project=home:heimdall78&amp;package=geogebra</a><br>你也可以使用我提供的镜像：<a href="http://mirrors.nanpuyue.com/geogebra/help/" target="_blank">http://mirrors.nanpuyue.com/geogebra/help/</a>  </p>
<p>未完待续…</p>

    
    
    <footer class="meta">
      
  <div class="cats">
<a href="/categories/教育/">教育</a><a href="/categories/教育/GeoGebra/">GeoGebra</a></div>

      
  <div class="tags">
<a href="/tags/开源/">开源</a><a href="/tags/软件/">软件</a><a href="/tags/数学/">数学</a></div>

      
    </footer>
    
  </div>
  
</article>

  <article class="post">
  
    <div class="gallery">
  <div class="photoset">
    
      <img src="">
    
  </div>
  <div class="control">
    <div class="prev"></div>
    <div class="next"></div>
  </div>
</div>
  
  <header>
    
  
    <h1 class="title"><a href="/2013/028.html">搭建基于OpenWrt、gPXE和iSCSI的Windows无盘工作站</a></h1>
  

    <time datetime="2013-02-22T05:29:00.000Z">
  <span class="day">22</span><span class="month">2月</span>
</time>
  </header>
  <div class="entry-content">
    
      <p>本文要介绍的是如何在OpenWrt平台上面搭建无盘工作站服务器以及Windows的iSCSI部署。<br>当然，由于OpenWrt也可以算得上一种Linux发行版了，所以本文所介绍的一些方法，在其它Linux发行版上面仍有一定的参考价值。  </p>
<p>整个过程大概分为以下几步：  </p>
<ul>
<li>给OpenWrt添加iSCSI Target支持</li>
<li>创建并配置iSCSI Target</li>
<li>获取gPXE并配置DHCP及TFTP服务</li>
<li>通过iSCSI部署Windows</li>
<li>测试</li>
</ul>
<h3 id="给OpenWrt添加iSCSI_Target支持">给OpenWrt添加iSCSI Target支持</h3>
<p>到写作本文为止，貌似OpenWrt官方还没有添加iSCSI Target支持相关的软件包，所以我们需要自力更生。然而幸运的是，已经有前人做过了类似的事情，我们只要采取“拿来主义”即可。  </p>
<p>相关资源：<br><a href="https://github.com/tobiaswaldvogel/openwrt-addpack/tree/master/scst" target="_blank">https://github.com/tobiaswaldvogel/openwrt-addpack/tree/master/scst</a><br><a href="https://github.com/tobiaswaldvogel/openwrt-addpack/tree/master/luci-app-scst" target="_blank">https://github.com/tobiaswaldvogel/openwrt-addpack/tree/master/luci-app-scst</a><br>上面分别是在OpenWrt的内核层面实现的iSCSI Target支持及其Luci配置界面，读者需要自行获取这两部分的源码然后进行交叉编译，这也是我最终选用的方案，下文关于iSCSI的内容均基于此。  </p>
<p>另外还有一个在用户空间实现的方案，详情见：<br><a href="https://dev.openwrt.org/ticket/8798" target="_blank">https://dev.openwrt.org/ticket/8798</a><br><a href="http://patchwork.openwrt.org/patch/2597" target="_blank">http://patchwork.openwrt.org/patch/2597</a>  </p>
<p>无论上面哪种方案，就目前而言都需要读者自行编译，但是如何交叉编译OpenWrt所需的软件包不在本文的讨论范围。  </p>
<p>采用第一种方案，进行交叉编译后，会得到以下几个软件包：  </p>
<ul>
<li>kmod-iscsi-scst</li>
<li>kmod-scst</li>
<li>kmod-scst-vdisk</li>
<li>scst</li>
<li>luci-app-scst</li>
</ul>
<p>把它们安装到OpenWrt，这样第一步添加iSCSI Target支持就算完成了。  </p>
<h3 id="创建并配置iSCSI_Target">创建并配置iSCSI Target</h3>
<p>要创建iSCSI Target需要路由器有足够大的存储空间，最好是在路由器上挂载移动硬盘，如果是U盘则最小需要16G的U盘，而且U盘的性能可能会差很多。<br>在进入下面的配置之前，我们需要创建一个固定大小的虚拟磁盘文件，你可以将移动硬盘连接到电脑上进行创建(Windows下创建一个VHD虚拟磁盘文件即可，至于要不要初始化该虚拟磁盘，则需要根据下面的操作决定，所以我建议先不要初始化)，也可以直接在路由器上面创建，直接在路由器上面创建需要使用<code>dd</code>命令，假设你的移动硬盘被挂载到<code>/mnt/sda1</code>,则可以使用下面的命令创建一个15G的文件：  </p>
<pre><code>mkdir /mnt/sda1/iscsi
dd <span class="keyword">if</span>=<span class="regexp">/dev/zero</span> of=<span class="regexp">/mnt/sda</span>1/iscsi/disk1.vhd bs=<span class="number">1</span>M count=<span class="number">15360</span>
</code></pre><p>创建文件的过程需要较长时间，请耐心等待，同时你可以另开一个终端登录路由器，并使用  </p>
<pre><code>du -h /mnt/sda1/iscsi/disk1<span class="preprocessor">.vhd</span>
</code></pre><p>查看文件大小。  </p>
<p>虚拟磁盘文件创建完成后，进入iSCSI Target的Web管理界面(<code>服务</code>-&gt;<code>iSCSI Target</code>)。</p>
<p>先是“Global settings”(全局设置)，里面只有一个“System ID”，就是iSCSI Qualified Name(即ipn)。<br>默认的设置是“iqn.2012-12.org.openwrt”，建议不要更改，至于其命名规范，可参考<a href="http://tools.ietf.org/html/rfc3721#page-5" target="_blank">rfc3721</a>中相关内容。  </p>
<p>然后是“Devices”(设备)，单击<code>添加</code>，添加一个Device，共享名随意(如<code>disk1</code>)，类型只有一个选项——“Image file”，“目录”即虚拟磁盘文件的路径(如<code>/mnt/sda1/iscsi/disk1.vh</code>)。<br>紧接着是“Tagets”，同样单击<code>添加</code>，共享名随意(如<code>iscsiboot</code>)，“Lun”则需填写上面添加的Device的共享名(如<code>disk1</code>)，设置好后别忘了点击<code>保存&amp;应用</code>。  </p>
<p>上面的设置，也可以通过编辑配置文件(<code>/etc/config/scst</code>)完成：  </p>
<pre><code>config global
    <span class="built_in">option</span> id <span class="string">'iqn.2012-12.org.openwrt'</span>

config target
    <span class="built_in">option</span> name <span class="string">'iscsiboot'</span>
    <span class="built_in">list</span> lun <span class="string">'disk1'</span>

config device
    <span class="built_in">option</span> <span class="class"><span class="keyword">type</span> '<span class="title">file</span>'</span>
    <span class="built_in">option</span> blocksize <span class="string">'512'</span>
    <span class="built_in">option</span> name <span class="string">'disk1'</span>
    <span class="built_in">option</span> path <span class="string">'/mnt/sda1/iscsi/disk1.vhd'</span>
</code></pre><p>最后，需要开启scst服务：  </p>
<pre><code>/etc/init<span class="preprocessor">.d</span>/scst enable
/etc/init<span class="preprocessor">.d</span>/scst start
</code></pre><p>如果start失败的话，可能需要重启路由器：  </p>
<pre><code>reboot
</code></pre><p>未完待续……</p>

    
    
    <footer class="meta">
      
  <div class="cats">
<a href="/categories/Linux/">Linux</a><a href="/categories/Linux/OpenWrt/">OpenWrt</a></div>

      
  <div class="tags">
<a href="/tags/Windows/">Windows</a><a href="/tags/无盘工作站/">无盘工作站</a><a href="/tags/Linux/">Linux</a><a href="/tags/iSCSI/">iSCSI</a></div>

      
    </footer>
    
  </div>
  
</article>

  <article class="post">
  
    <div class="gallery">
  <div class="photoset">
    
      <img src="">
    
  </div>
  <div class="control">
    <div class="prev"></div>
    <div class="next"></div>
  </div>
</div>
  
  <header>
    
  
    <h1 class="title"><a href="/2013/027.html">基于OpenWrt的Linux无盘工作站方案</a></h1>
  

    <time datetime="2013-02-14T14:29:00.000Z">
  <span class="day">14</span><span class="month">2月</span>
</time>
  </header>
  <div class="entry-content">
    
      <p>本文要介绍的，是在使用OpenWrt的无线路由器上搭建服务器并以此启动计算机并运行桌面应用的一套方案。  </p>
<p>整个方案要用到的硬件：  </p>
<ul>
<li>一个刷好OpenWrt的带USB接口和有线网络接口的无线路由器(TP-LINK TL-WR720N V3)</li>
<li>一个U盘(PNY 8G)</li>
<li>一根双绞交叉网线</li>
<li>一台支持网络启动的电脑(Acer 4738G)</li>
</ul>
<p>本方案使用的系统为Ubuntu，对版本没有特别的要求，但早期的版本不保证一定能成功，所以首先要准备Ubuntu的Live CD的iso镜像，我使用的是ubuntu-12.04.1-desktop-amd64.iso，如果你的电脑的内存不是很大(我的6G)建议使用32位的镜像。  </p>
<p>下面正式进入实际操作，第一步是挂载U盘，这个可以灵活一些，我的情况是路由器只有4M Flash空间，不足以安装我所需的所有软件包，所以我将U盘分为三个分区：  </p>
<ul>
<li>/dev/sda1    ext4    512M</li>
<li>/dev/sda2    swap    16M</li>
<li>/dev/sda3    ntfs    6.89G</li>
</ul>
<p>其中<code>sda1</code>挂载到<code>/overlay</code>，<code>sda2</code>是交换分区，而sda3则是数据存储分区，它会被OpenWrt自动挂载到<code>/mnt/sda3</code>，关于挂载U盘分区到<code>/overlay</code>的细节，可以参考<a href="http://blog.nanpuyue.com/2012/011.html">http://blog.nanpuyue.com/2012/011.html</a>的后半部分。  </p>
<p>如果你的路由器剩余空间足够大到可以安装下面的软件包，你可以不用挂载U盘分区到<code>/overlay</code>。总之，在确保路由器有足够空间安装所需软件包后安装<code>nfs-kernel-server-utils</code>即可。<br>    opkg update<br>    opkg install nfs-kernel-server-utils<br>这样，路由器会自动安装<code>nfs-kernel-server-utils</code>及其依赖，当然，在安装是有可能出现内核模块(kmod-*)不能安装的问题，这不在本文的讨论范围。  </p>
<p>安装好所需软件包后，就是文件的就位和各种配置了。首先你要确定文件存放位置，这里涉及到两个文件夹，一个是网络启动相关的，一个是nfs相关的，前者用于存放网络启动引导文件，后者用于存放Ubuntu的spuashfs文件系统。当然，它们可以是同一个文件夹，但是我并不推荐那样做。  </p>
<p>最后，我的两个文件夹分别是<code>/mnt/sda3/tftproot</code>和<code>/mnt/sda3/nfsroot</code>。  </p>
<p>然后是上传文件，具体怎么上传，没有要求，只要能将文件放到指定位置即可，可以是scp、ftp、或者通过samba，甚至是将U盘直接查到电脑上复制，都没有关系。  </p>
<p>将Ubuntu Live CD中的<code>casper</code>上传到<code>/mnt/sda3/nfsroot</code>，而<code>/mnt/sda3/tftproot</code>下则需要有以下文件：</p>
<ul>
<li>pxelinux.0</li>
<li>vesamenu.c32</li>
<li>vmlinuz</li>
<li>initrd.lz</li>
</ul>
<p>其中<code>pxelinux.0</code>和<code>vesamenu.c32</code>可以通过下载得到，我是从Debian的ftp上下载到的：<br><a href="ftp://ftp.debian.org/debian/dists/wheezy/main/installer-i386/current/images/netboot/pxelinux.0">pxelinux.0</a><br><a href="ftp://ftp.debian.org/debian/dists/wheezy/main/installer-i386/current/images/netboot/debian-installer/i386/boot-screens/vesamenu.c32">vesamenu.c32</a>  </p>
<p>而<code>vmlinuz</code>和<code>initrd.lz</code>则来自Ubuntu Live CD下的<code>casper</code>目录。  </p>
<p>然后还需要在<code>/mnt/sda3/tftproot</code>下新建目录<code>pxelinux.cfg</code>目录，并在<code>pxelinux.cfg</code>下新建文件<code>default</code>：  </p>
<pre><code><span class="title">cd</span> /mnt/sda3/tftproot
<span class="title">mkdir</span> pxelinux.cfg
<span class="title">vi</span> pxelinux.cfg/<span class="default"><span class="keyword">default</span></span>
</code></pre><p><code>default</code>中需要写入如下内容：</p>
<pre><code>default vesamenu.c32
prompt <span class="number">0</span>
timeout <span class="number">30</span>
menu title <span class="constant">UBUNTU</span> <span class="constant">LIVE</span>
label ^<span class="constant">Ubuntu</span> <span class="constant">Desktop</span>
kernel vmlinuz
append root=<span class="regexp">/dev/nfs</span> boot=casper netboot=nfs nfsroot=<span class="number">192.168</span>.<span class="number">1.1</span><span class="symbol">:/mnt/sda3/nfsroot</span> initrd=initrd.lz locale=zh_CN.<span class="constant">UTF</span>-<span class="number">8</span>
</code></pre><p>其中的<code>nfsroot=192.168.1.1:/mnt/sda3/nfsroot</code>这个参数是要根据实际情况而定的，前面的<code>192.168.1.1</code>是你的路由器的IP，而后面则是之前确定的nfs的目录。  </p>
<p>到这里，所有的文件都已准备妥当了，剩下的就是配置tftp和nfs服务器了，tftp服务器的配置参考<a href="http://blog.nanpuyue.com/2012/012.html">http://blog.nanpuyue.com/2012/012.html</a>最后一步，前面的都不用做，只需要完成Web界面的设置即可：  </p>
<p>TFTP服务器根目录    /mnt/sda3/tftproot<br>网络启动镜像        pxelinux.0  </p>
<p><img src="https://lh6.googleusercontent.com/-oxhpW5KKgW4/UfAMeFEVW8I/AAAAAAAAAWk/ZZlI_lkIjyA/s0/tftp.png" alt="tftp设置">  </p>
<p>然后是配置nfs：  </p>
<pre><code>vi /etc/<span class="built_in">exports</span>
</code></pre><p>先注释掉原来仅有的一行(在<code>/mnt   *(ro,all_squash,insecure,sync)</code>前面插入一个<code>#</code>)，然后添加一行：  </p>
<pre><code>/mnt/sda3/nfsroot *(<span class="keyword">async</span>,no_root_squash,no_subtree_check,ro)
</code></pre><p>最后启动nfs服务：  </p>
<pre><code>/etc/init.d/portmap <span class="operator"><span class="keyword">start</span>
/etc/init.d/nfsd <span class="keyword">start</span></span>
</code></pre><p>如果需要nfs服务自启，则要执行：  </p>
<pre><code>/etc/init<span class="preprocessor">.d</span>/portmap enable
/etc/init<span class="preprocessor">.d</span>/nfsd enable
</code></pre><p>你也可以在Web界面的“系统”-“启动项”下控制上面两个服务。  </p>
<p>至此，整个搭建过程就完成了，剩下的，就是插上网线，重启电脑并选择从网络启动了。<br>然后你会看到下面的界面，这时按下回车或者等待3秒Ubuntu就会启动了，需要提醒的是，启动后与使用CD光盘启动无异，你对系统所做的更改都不会被保存。<br><img src="https://lh6.googleusercontent.com/-U1uPsRcLnKs/UfAMQSLUtGI/AAAAAAAAAVc/7MPKOyVbla4/s0/boot_menu.png" alt="启动菜单"></p>

    
    
    <footer class="meta">
      
  <div class="cats">
<a href="/categories/Linux/">Linux</a><a href="/categories/Linux/OpenWrt/">OpenWrt</a></div>

      
      
    </footer>
    
  </div>
  
</article>

  <article class="post">
  
    <div class="gallery">
  <div class="photoset">
    
      <img src="">
    
  </div>
  <div class="control">
    <div class="prev"></div>
    <div class="next"></div>
  </div>
</div>
  
  <header>
    
  
    <h1 class="title"><a href="/2013/026.html">TP-LINK TL-WR720N V3刷回原厂固件</a></h1>
  

    <time datetime="2013-02-14T05:14:00.000Z">
  <span class="day">14</span><span class="month">2月</span>
</time>
  </header>
  <div class="entry-content">
    
      <p>这里要讲的，是TP-LINK TL-WR720N V3无线路由器已经刷了OpenWrt的情况下刷回TP-LINK原厂固件的方法。  </p>
<p>TP-LINK官方目前提供两个版本的原厂固件下载：<br>TL-WR720N V3_120620标准版：<br><a href="http://service.tp-link.com.cn/detail_download_846.html" target="_blank">http://service.tp-link.com.cn/detail_download_846.html</a>(官方下载页面)<br><a href="http://files.nanpuyue.com/openwrt/ar71xx/tl-wr720n-v3/original/tp-link-wr720nv3-120620.bin" target="_blank">http://files.nanpuyue.com/openwrt/ar71xx/tl-wr720n-v3/original/tp-link-wr720nv3-120620.bin</a>(备用下载)<br>md5sum：<code>43a21a63749479301c495d6b3759e3c7</code><br>TL-WR720N V3_120913标准版：<br><a href="http://service.tp-link.com.cn/detail_download_918.html" target="_blank">http://service.tp-link.com.cn/detail_download_918.html</a>(官方下载页面)<br><a href="http://files.nanpuyue.com/openwrt/ar71xx/tl-wr720n-v3/original/tp-link-wr720nv3-120913.bin" target="_blank">http://files.nanpuyue.com/openwrt/ar71xx/tl-wr720n-v3/original/tp-link-wr720nv3-120913.bin</a>(备用下载)<br>md5sum：<code>1855f08a4e98f8633a16d5b7102309ac</code>  </p>
<p>刷回原厂固件也很简单，只要直接在OpenWrt的Web界面升级即可，但是也有几个要注意的地方，否则可能成“砖”！  </p>
<ul>
<li>只刷经过验证可刷的固件</li>
<li>最好先恢复OpenWrt的设置，如果有U盘，也最好先拔掉，并在重启完成后上传固件</li>
<li>上传固件时一定要去掉“保留配置”的选项</li>
<li>固件上传后仔细确认校验码确保无误</li>
<li>固件刷新时绝对不能断电</li>
</ul>
<p>先说第一条，官方的两个固件版本，120620版的就是经过验证的固件，可刷；而120913版的，就是未经验证的固件，我也不敢验证。细心的同鞋可能会发现两个固件大小有明显差异，具体原因我不确定，不过据说120913版是ver 1.7的硬件专用的。<br>固件版本的问题，搞得不好是要让路由器成砖的，我宁愿先刷120620版再升级120913版(我没有试过)，也不敢直接刷回120913版，事实上，在OpenWrt的Web界面，120913版的固件也是不能通过验证的。也许你可以使用mtd之类的命令强行刷入，但是这样成砖的风险回更大！  </p>
<p>然后是“保留配置”的选项，这个一定不能选，否则同样可能成砖！  </p>
<p>校验码也很重要，因为在固件的下载、复制、移动、上传等各个环节都有可能出错导致固件损坏，只有校验码完全一致，才能保证路由器接收到的固件是正确的。<br><img src="https://lh3.googleusercontent.com/-2r1-rRn1lU4/UfAMQHGyeoI/AAAAAAAAAVQ/3XWV54OqseM/s0/720%E5%8E%9F%E5%8E%82%E5%9B%BA%E4%BB%B6.png" alt="720原厂固件MD5"><br>再次确认下方是否有“配置文件将被删除”的提示，如果提示的是“配置文件将被保留”，请点取消。  </p>
<p>整个固件刷新过程可能需要4到5分钟或者更长，一定耐心等待，不能强行断电，有条件的可以使用接触良好的Micro-USB线连接移动电源或带电池笔记本供电，以防突然停电。  </p>
<p>最后，要注意的是，官方固件的Web管理界面的默认地址是<a href="http://192.168.1.253" target="_blank">http://192.168.1.253</a>。  </p>

    
    
    <footer class="meta">
      
  <div class="cats">
<a href="/categories/Linux/">Linux</a><a href="/categories/Linux/OpenWrt/">OpenWrt</a></div>

      
      
    </footer>
    
  </div>
  
</article>

  <article class="post">
  
    <div class="gallery">
  <div class="photoset">
    
      <img src="">
    
  </div>
  <div class="control">
    <div class="prev"></div>
    <div class="next"></div>
  </div>
</div>
  
  <header>
    
  
    <h1 class="title"><a href="/2013/025.html">来自南浦月的WINE QQ2012</a></h1>
  

    <time datetime="2013-01-18T01:49:00.000Z">
  <span class="day">18</span><span class="month">1月</span>
</time>
  </header>
  <div class="entry-content">
    
      <p>本文的最新版本在<a href="http://blog.nanpuyue.com/2013/025.html">http://blog.nanpuyue.com/2013/025.html</a>  </p>
<p><strong>本版wineqq基于QQ2012 Beta3(4786)，已在Ubuntu 12.04&amp;12.10下测试通过，同时支持32位和64位操作系统。</strong>  </p>
<h2 id="下载地址：">下载地址：</h2>
<h4 id="deb包">deb包</h4>
<p>2013年2月13日：wine-qq2012-nanpuyue_2013-2-13.deb<br><a href="http://s.yunio.com/FMRdMx" target="_blank">http://s.yunio.com/FMRdMx</a>(云诺)<br>md5sum：78a08830579a5dd8023092e94c87bf8f<br>更新内容：  </p>
<ul>
<li>不再集成QQ安装包及微软的dll,所需文件均改由互联网获取</li>
<li>历史版本不再提供下载</li>
</ul>
<p><strong>deb包已集成自编译的Wine 1.5.22，系统无需安装Wine亦可使用</strong>  </p>
<h2 id="deb包安装：">deb包安装：</h2>
<p>64位系统差一个共享厍文件并且还需要安装ia32-libs：  </p>
<pre><code>sudo wget <span class="attribute">-P</span> <span class="string">'/usr/lib/i386-linux-gnu/pkcs11'</span> <span class="string">'http://files.nanpuyue.com/ubuntu/wineqq/so/gnome-keyring-pkcs11.so'</span>
sudo apt<span class="attribute">-get</span> install ia32<span class="attribute">-libs</span>
</code></pre><p><strong>安装有几点注意：</strong>  </p>
<ul>
<li>不要双击打开安装，一定要使用命令安装</li>
<li>安装脚本会自动关闭所有Wine程序，请自己先关闭所有Wine程序，以免造成信息丢失</li>
<li>再重复一遍，一定不要双击打开安装，否则可能造成安装无法完成</li>
</ul>
<p>使用以下命令安装：  </p>
<pre><code>sudo dpkg <span class="attribute">-i</span> <span class="built_in">.</span>/wine<span class="attribute">-qq2012</span><span class="attribute">-nanpuyue_2013</span><span class="subst">-</span><span class="number">2</span><span class="subst">-</span><span class="number">13.</span>deb
</code></pre><p>如果你非要双击使用软件中心安装，则无法完成配置，需要安装完成后使用下面的命令完成配置：  </p>
<pre><code>qq2012 <span class="keyword">install</span>
</code></pre><p>或者  </p>
<pre><code>sudo dpkg<span class="attribute">-reconfigure</span> wine<span class="attribute">-qq2012</span><span class="attribute">-nanpuyue</span>
</code></pre><p>如果你以root用户登录，则安装时也不会进行配置，只能通过下面的命令配置：  </p>
<pre><code>qq2012 <span class="keyword">install</span>
</code></pre><p>配置完成后，不出意外会在桌面生成快捷方式，如果没有快捷方式，或者你喜欢，也可以使用命令启动QQ：  </p>
<pre><code>qq2012 <span class="operator"><span class="keyword">start</span></span>
</code></pre><p>桌面快捷方式，上面那个可以删除，双击即可打开QQ<br><img src="https://lh5.googleusercontent.com/-LDeedfJACTI/UfCNfGAgt7I/AAAAAAAAAbs/Hd1FoBsOj-0/s0/快捷方式.png" alt="快捷方式"><br>登录界面，密码框不会崩溃<br><img src="https://lh6.googleusercontent.com/-AFdaTz8wWG0/UfCNhicDxzI/AAAAAAAAAcI/5LiphBN5Wbs/s0/登录界面.png" alt="登录界面"><br><strong>关闭自动更新</strong><br>主面板，没有黑框和残影，<strong>现在要做的第一件事应该是取消自动更新，因为更新会造成QQ无法打开！</strong><br><img src="https://lh4.googleusercontent.com/-5n51gQO6BRI/UfCNfXCy_MI/AAAAAAAAAbo/S92bWQ8AuAw/s0/主面版.png" alt="主面板"><br><strong>如果面板上已经出现软件更新的图标，请直接在上面单击右键，然后点“退出”，再继续下面的设置：</strong><br><img src="https://lh4.googleusercontent.com/-vInMlEwXcE0/UfCNizP8FgI/AAAAAAAAAcU/qt8LMhJi2QY/s0/退出更新.png" alt="退出更新"><br>单击你的头像，进入设置，再单击“系统设置”<br><img src="https://lh6.googleusercontent.com/-rHo9rhJ_6Ts/UfCNhh8bJkI/AAAAAAAAAcE/P0D5sEjBlhc/s0/设置.png" alt="设置"><br>单击“基本设置”下的“软件更新”，选<strong>“有更新时不要安装，但提醒我”</strong>，然后“确定”<br><img src="https://lh3.googleusercontent.com/-TGtH6ZarCPU/UfCNjG3q3-I/AAAAAAAAAcY/0EQuNcM7gWs/s0/软件更新设置.png" alt="软件更新设置"><br><strong>可以调用系统字体</strong><br><img src="https://lh5.googleusercontent.com/-o8LNDdVzr7Y/UfCNh1ftb9I/AAAAAAAAAcQ/NBX5g91DnQA/s0/调用系统字体.png" alt="调用系统字体"><br>文件发送和接收都是正常的<br><img src="https://lh6.googleusercontent.com/-cuK9ObbaBMw/UfCNgbQQ6XI/AAAAAAAAAb4/43MdxIBXNQs/s0/文件发送.png" alt="文件发送"><br>除本地视频可能不可用以外，其他功能也基本正常，也不会无故崩溃，欢迎测试。<br>还有两个推荐设置，按下图设置后，可以最小化QQ，单击Ubuntu面板上的QQ图标即可呼出：<br><img src="https://lh5.googleusercontent.com/-f1b_tYAF6BM/UfCNfAmkoxI/AAAAAAAAAbk/SG45LKZmbdE/s0/推荐设置.png" alt="推荐设置">  </p>

    
    
    <footer class="meta">
      
  <div class="cats">
<a href="/categories/Linux/">Linux</a><a href="/categories/Linux/Ubuntu/">Ubuntu</a></div>

      
      
    </footer>
    
  </div>
  
</article>


<nav id="pagenavi">
  
  
    <a href="/page/2/" class="alignright next">下一页</a>
  
  <div class="clearfix"></div>
</nav></div>
  <footer id="footer" class="inner"><div class="social alignright">
  
    <a class="facebook" href="https://www.facebook.com/nanpuyue" title="Facebook">Facebook</a>
  
  
    <a class="google" href="https://plus.google.com/+nanpuyue" title="Google+">Google+</a>
  
  
    <a class="twitter" href="https://twitter.com/nanpuyue" title="Twitter">Twitter</a>
  
  
    <a class="github" href="https://github.com/nanpuyue" title="GitHub">GitHub</a>
  
  <a class="rss" href="/atom.xml" title="RSS">RSS</a>
</div>

<div align="left">
  
  &copy; 2012-2014 <a href="http://blog.nanpuyue.com"> 南浦月 </a>
  
</div>

<div class="clearfix"></div>
</footer>
  <script src="/js/jquery.imagesloaded.min.js"></script>
<script src="/js/gallery.js"></script>


<script type="text/javascript">
var disqus_shortname = 'nanpuyue';

(function(){
  var dsq = document.createElement('script');
  dsq.type = 'text/javascript';
  dsq.async = true;
  dsq.src = 'http://' + disqus_shortname + '.disqus.com/count.js';
  (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
}());
</script>



<link rel="stylesheet" href="/fancybox/jquery.fancybox.css" media="screen" type="text/css">
<script src="/fancybox/jquery.fancybox.pack.js"></script>
<script type="text/javascript">
(function($){
  $('.fancybox').fancybox();
})(jQuery);
</script>


<div id="phasebeam">
  <canvas></canvas>
  <canvas></canvas>
  <canvas></canvas>
</div>
<script src="/js/phasebeam.js"></script>
</body>
</html>